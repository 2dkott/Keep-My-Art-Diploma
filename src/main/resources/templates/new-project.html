<!doctype html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="color-scheme" content="light dark" />
    <link rel="stylesheet" th:href="@{/css/pico.min.css}">
    <title>New Project</title>
    <style>
        .outline {
            --pico-border-width: 0;
            border-radius: 0.5rem;
            margin-bottom: 0;
        }
        #cloud-source-group {
            margin-bottom: 0;
        }
        #form-button-fieldset {
            width: 100px;
        }
    </style>

</head>
<script type = "text/javascript">
    function validate() {

        if( document.getElementById("cloud-source-list").getElementsByTagName("li").length === 0 ) {
            document.getElementById("cloud-source-warning").style.display = "block"
            return false;
        }
        document.getElementById("cloud-source-warning").style.display = "none"
        return( true );
    }

    function goto( oauthUrl ) {
        $("*{project.name}").val()=document.getElementById("project-name").value;
        window.open(oauthUrl);
    }
</script>
<body>
<main class="container">
    <nav>
        <ul>
            <li><a href="#">Project</a></li>
            <li><a href="#">Resources</a></li>
        </ul>
    </nav>
    <section class="pico">
        <form name = "newProjectForm" onsubmit="return validate()" action="#" th:action="@{/project/register}" method="post">
            <label for="project-name">1. Добавьте имя Вашего проекта:
                <input id="project-name"
                       type="text"
                       name="project-name"
                       placeholder="Имя Вашего Проекта"
                       aria-label="Project Local Path"
                       required
                       minlength="3"
                       th:field="*{project.name}"
                />
            </label>
            <label for="local-path-input">2. Вставьте путь к Вашему проекту
            <input id="local-path-input"
                   type="text"
                   name="local-path"
                   placeholder="Путь к Вашему проекту"
                   aria-label="Project Local Path"
                   required
                   minlength="3"
                   pattern="^(?:[a-zA-Z]:|(\\\\|\/\/)).*"
                   th:field="*{localSource.path}"
            />
            </label>
            <label for="cloud-source-group">3. Добавьте Ваше облачное хранилище
                <fieldset id="cloud-source-group">
                    <button class="outline" type="button" th:attr="onclick=|goto('${yandexOauthUrl}')|" >YANDEX DISK</button>
                    <button class="outline" type="button">GOOGLE DISK</button>
                </fieldset>
                <ul id="cloud-source-list" th:each="keepSource : ${keepSources}">
                    <li th:if="${keepSource.isCloud()}" th:text="${keepSource.getUserName()}"></li>
                </ul>
                <article id="cloud-source-warning" style="display: none">
                    <h2>Внимание</h2>
                    <p> Добавьте Облачное хранилище! </p>
                </article>
            </label>
            <fieldset role="group" id="form-button-fieldset">
                <button type="submit">Создать</button>
                <button type="reset">Отмена</button>
            </fieldset>
        </form>
    </section>
</main>
</body>
</html>